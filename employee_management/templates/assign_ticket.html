{% extends 'base.html' %}
{% block content %}
    <br><br>
    <!-- Display form errors if any -->
    {% if form.errors %}
        <div class="alert alert-danger">
            <ul>
                {% for field in form %}
                    {% for error in field.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <form method="POST">
        {% csrf_token %}
        <input type="hidden" name="ticket_id" value="{{ ticket.ticket_id }}">

        <!-- Display other fields -->
        {{ form.subject.errors }}
        {{ form.subject }}<br><br>

        {{ form.status.errors }}
        {{ form.status }}<br><br>

        {{ form.group.errors }}
        {{ form.group }}<br><br>

        {{ form.note.errors }}
        {{ form.note }}<br><br>

        {{ form.priority.errors }}
        {{ form.priority }}<br><br>

        <!-- Reassign to field -->
        <label for="assigned_user">Reassign to:</label>
        <select id="assigned_user" name="assigned_user" class="form-control">
            {% for user in logged_in_users %}
                <option value="{{ user.id }}" {% if user == ticket.assigned_to %}selected{% endif %}>{{ user.username }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary mt-3">Reassign Ticket</button>
    </form>
{% endblock %}
